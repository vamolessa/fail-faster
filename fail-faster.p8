pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- a game for fc jam 2018

---------------- constants

-- map
initial_map=1
map_count=1
next_map_time=20
map_w=32
map_h=16

-- camera
cam_x=0
cam_y=0

shake_force=7
shake_time=4

-- physics
gravity=0.3

f_solid=0x1
f_deadly=0x2
f_goal=0x4

c_mask=0x0
c_mask=bor(c_mask,f_solid)
c_mask=bor(c_mask,f_deadly)
c_mask=bor(c_mask,f_goal)

map_colliders={}
map_colliders.__index=function() return {0,0,8,8} end
setmetatable(map_colliders,map_colliders)

debug_colliders=nil

-- particles
test_ppal={7,9,10}

-- player
min_vel_y=-3.3

player_vel=1.5
player_jump=-4
player_jump_time=4

player_death_anim_time=20
player_anim_spd=4
player_anim={32}

---------------- default functions

function _init()
	player={}
	maps={}
	cur_map={}

	next_map_timer=0
	shake_timer=0

	level=0

	load_map(1)
end

function _draw()
	cls(12)

	if level==0 then
		draw_title()
		return
	end

	update_camera(player)

	draw_map(1)
	draw_player(player)

	if next_map_timer>0 then
		local t=next_map_time-next_map_timer
		local f=min(t,fade_time)/fade_time
		fade(f)
	end
end

function _update()
	if level==0 then
		update_title()
		return
	end

	if next_map_timer>0 then
		next_map_timer-=1
		if next_map_timer==0 then
			load_map(level+1)
		end

		return
	end

	update_player(player,level)
end

---------------- player

function reset_player(p,l)
	reset_rigidbody(p)
	p.ox=1
	p.w-=2
	p.oy=2
	p.h-=2

	p.x=cur_map.player.x
	p.y=cur_map.player.y-4

	p.death_anim=0
	p.flip=false
	p.jump_timer=0

	return p
end

function draw_player(p)
	if p.death_anim==1 then
		reset_player(p,level)
	end

	if p.death_anim>0 then
		p.death_anim-=1
		return
	end

	local idx=1
	--if p.vx~=0 and p.grounded then
	--	idx+=flr(time()*4)%4
	--end

	spr(player_anim[idx],p.x,p.y,1,1,p.flip)

	if debug_colliders!=nil then
		draw_collider(p,8)

		for c in all(debug_colliders) do
			draw_collider(c,11)
		end
		debug_colliders={}
	end
end

function update_player(p)
	if p.death_anim>0 then
		return
	end

	p.vx=0
	if btn(0) then
		p.vx=-player_vel
		p.flip=true
	elseif btn(1) then
		p.vx=player_vel
		p.flip=false
	end

	if btnp(5) or btnp(4) then
		p.jump_timer=player_jump_time
	end

	if p.jump_timer>0 then
		p.jump_timer-=1
		if p.grounded then
			p.jump_timer=0
			p.vy+=player_jump
			p.grounded=false
		end
	end

	update_rigidbody(p,gravity)

	-- map collision
	local f,dx,dy=map_check_collision(p,1,1)

	if band(f,f_deadly)!=0 then
		kill_player(p)
	elseif p.y>128 then
		kill_player(p)
	elseif band(f,f_goal)!=0 then
		next_map_timer=next_map_time
	else
		respond_collision(p,dx,dy)
	end
end

---------------- physics

function reset_rigidbody(rb)
	rb.x=0
	rb.y=0
	rb.ox=0
	rb.oy=0
	rb.w=8
	rb.h=8

	rb.vx=0
	rb.vy=0

	rb.grounded=false

	return rb
end

function copy_rigidbody_state(a,b)
	b.x=a.x
	b.y=a.y
	b.vx=a.vx
	b.vy=a.vy
end

function update_rigidbody(rb,g)
	rb.x+=rb.vx

	rb.vy+=g
	rb.vy=max(rb.vy,min_vel_y)

	rb.y+=rb.vy
end

function draw_collider(rb,c)
	local x0=round(rb.x+rb.ox)
	local y0=round(rb.y+rb.oy)
	local x1=round(x0+rb.w-1)
	local y1=round(y0+rb.h-1)
	rect(x0,y0,x1,y1,c)
end

function check_collision_raw(a,b)
	if a==b then
		return false,0,0
	end

	local ax0=a.x+a.ox
	local ax1=ax0+a.w
	local ay0=a.y+a.oy
	local ay1=ay0+a.h

	local bx0=b.x+b.ox
	local bx1=bx0+b.w
	local by0=b.y+b.oy
	local by1=by0+b.h

	if ax0>=bx1 or bx0>=ax1 or ay0>=by1 or by0>=ay1 then
		return false,0,0
	end

	local dx=min_abs(bx1-ax0,bx0-ax1)
	local dy=min_abs(by1-ay0,by0-ay1)

	return true,dx,dy
end

function check_collision(a,b)
	local r,dx,dy=check_collision_raw(a,b)

	if abs(dy)<abs(dx) then
		dx=0
	else
		dy=0
	end

	return true, dx, dy
end

function respond_collision(a,dx,dy)
	a.x+=dx
	a.y+=dy

	if dx!=0 and sgn(dx)!=sgn(a.vx) then
		a.vx=0
	end

	local sdy=sgn(dy)
	if dy!=0 and sdy!=sgn(a.vy) then
		a.vy=0

		if sdy<0 then
			a.grounded=true
		end
	end
end

function map_check_collision(c,sx,sy)
	local function try_col(r,c,mx,my,mm)
		local i,j=map_offset(level,mx,my)

		local m=mget(i,j)
		local f=fget(m)
		local solid=band(f,c_mask)!=0x0

		if mx<0 or mx>=map_w then
			solid=true
			f=f_solid
			m=-1
		elseif my<0 or my>=map_h then
			solid=false
		end

		if not solid then
			return
		end

		local mc=map_colliders[m]
		local t={
			x=mx*8,
			y=my*8,
			ox=mc[1],
			oy=mc[2],
			w=mc[3],
			h=mc[4],
			vx=0,
			vy=0
		}

		if band(f,f_solid)!=0x0 then
			local cr,dx,dy=check_collision_raw(c,t,sx,sy)
			if cr then
				r.f=bor(r.f,f)
				r.m=bor(r.m,mm)

				add(r.c,{x=dx,y=dy})

				if debug_colliders!=nil then
					add(debug_colliders,t)
				end
			end
		end
	end

	local mx=flr(c.x/8)
	local my=flr(c.y/8)

	local r={
		f=0x0,
		m=0x0,
		c={},
	}

	try_col(r,c,mx,my,0x1)
	try_col(r,c,mx+1,my,0x2)
	try_col(r,c,mx,my+1,0x4)
	try_col(r,c,mx+1,my+1,0x8)

	local d1=bor(0x1,0x8)
	local d2=bor(0x2,0x4)

	local dx=0
	local dy=0

	local function t(v,d)
		return abs(v/d)
	end

	if #r.c<3 and r.m!=d1 and r.m!=d2 then
		if #r.c==2 then
			for rc in all(r.c) do
				dx=max_abs(dx,rc.x)
				dy=max_abs(dy,rc.y)
			end

			for rc in all(r.c) do
				if rc.x!=0 and sgn(rc.x)!=sgn(dx) then
					dx=0
					break
				end
				if rc.y!=0 and sgn(rc.y)!=sgn(dy) then
					dy=0
					break
				end
			end
		elseif #r.c==1 then
			for rc in all(r.c) do
				if t(c.vx,rc.x)>t(c.vy,rc.y) then
					rc.y=0
				else
					rc.x=0
				end

				dx=max_abs(dx,rc.x)
				dy=max_abs(dy,rc.y)
			end
		end
	else
		for rc in all(r.c) do
			if t(c.vx,rc.x)>t(c.vy,rc.y) then
				rc.y=0
			else
				rc.x=0
			end

			dx=max_abs(dx,rc.x)
			dy=max_abs(dy,rc.y)
		end
	end

	return r.f,dx,dy
end

---------------- particles

function new_particle_burst(x,y,c,p)
	local vmx=particle_force.x
	local vmy=particle_force.y

	for i=1,c do
		local p={
			time=particle_time,
			x=x+4,
			y=y+4,
			vx=rnd(vmx)-vmx/2,
			vy=-rnd(vmy/2)-vmy/2,
			g=particle_gravity,
			c=p[round(rnd(#p-1))+1]
		}

		update_particle(p)
		add(particles,p)
	end
end

function new_particle_goal(x,y,c,p)
	local vmy=particle_force.y

	for i=1,c do
		local p={
			time=particle_time,
			x=x+flr(rnd(8)),
			y=y+8,
			vx=0,
			vy=rnd(vmy/2)-vmy/2,
			g=0,
			c=p[round(rnd(#p-1))+1]
		}

		add(particles,p)
	end
end

function update_particle(p)
	p.vy+=p.g
	p.vy=max(p.vy,min_vel_y)

	p.x+=p.vx
	p.y+=p.vy

	p.time-=1
	if p.time<0 then
		del(particles,p)
	end
end

function update_particles()
	for p in all(particles) do
		update_particle(p)
	end
end

function draw_particles()
	for p in all(particles) do
		pset(p.x,p.y,p.c)
	end
end

---------------- map

function load_map(l)
	fade(0)

	if l>map_count then
		level=0
		return
	end

	level=l
	cur_map=scan_map(l)

	reset_player(player,l)
end

function scan_map(l)
	local m=maps[l]
	if m then
		return m
	end

	m={
		player={x=0,y=0},
	}

	local oi,oj=map_offset(l,0,0)

	for i=0,map_w do
		for j=0,map_h do
			local x=oi+i
			local y=oj+j
			local mi=mget(x,y)

			if mi==1 then -- player
				mset(x,y,0)
				m.player={x=i*8,y=j*8}
			end
		end
	end

	maps[l]=m
	return m
end

function map_offset(l,i,j)
	return i+l*map_w,j
end

function draw_map(l)
	local i,j=map_offset(l,0,0)
	map(i,j,0,0,map_w,map_h)
end

---------------- camera

function begin_shake()
	shake_timer=shake_time
end

function update_camera(p)
	cam_x=p.x-map_w*2+4
	cam_y=0

	cam_x=min(max(cam_x,0),128)

	camera(cam_x,cam_y)
	update_shake()
end

function update_shake()
	if shake_timer==1 then
		camera(cam_x,cam_y)
	end

	shake_timer-=1
	if shake_timer>0 then
		local f=shake_force
		local x=rnd(f)-f/2
		local y=rnd(f)-f/2
		camera(cam_x+flr(x),cam_y+flr(y))
	end
end

---------------- helpers

function round(x)
	return flr(x+0.5)
end

function fsgn(x)
	if x==0 then
		return 0
	else
		return sgn(x)
	end
end

function min_abs(a,b)
	if abs(a)<abs(b) then
		return a
	else
		return b
	end
end

function max_abs(a,b)
	if abs(a)>abs(b) then
		return a
	else
		return b
	end
end

function fade(fa)
	fa=max(min(1,fa),0)

	local fn=8
	local pn=15
	local fc=1/fn
	local fi=flr(fa/fc)+1

	for n=1,pn do
		pal(n,fades[n][fi],0)
	end
end

fade_time=10
fades={
	{1,1,1,1,0,0,0,0},
	{2,2,2,1,1,0,0,0},
	{3,3,4,5,2,1,1,0},
	{4,4,2,2,1,1,1,0},
	{5,5,2,2,1,1,1,0},
	{6,6,13,5,2,1,1,0},
	{7,7,6,13,5,2,1,0},
	{8,8,9,4,5,2,1,0},
	{9,9,4,5,2,1,1,0},
	{10,15,9,4,5,2,1,0},
	{11,11,3,4,5,2,1,0},
	{12,12,13,5,5,2,1,0},
	{13,13,5,5,2,1,1,0},
	{14,9,9,4,5,2,1,0},
	{15,14,9,4,5,2,1,0}
}

__gfx__
00080000000000000000000000000000000000000044400000000000001110000000000000000000000000000000000000000000000000000000000000000000
00088800000000000000080000000000000000000044440000444000001111000011100000000000000000000000000000000000000000000000000000000000
0088888000008800000099800cccc0000cccc0004444444400444400111111110011110000000000000000000000000000000000000000000000000000000000
088989880088998000089980ccc77c00ccc77c00001c1c0044444444002c2c001111111100000000000000000000000000000000000000000000000000000000
089199180899779800997798cccc7cc0cccc7cc002222220001c1c0008888880002c2c0000000000000000000000000000000000000000000000000000000000
089199180088998000089980ccccccc01ccccc00c0222c0c02222220c0888c0c0888888000000000000000000000000000000000000000000000000000000000
0889999800008800000099801ccccc000111c00001c2c100c1222c0c01c8c100c1888c0c00000000000000000000000000000000000000000000000000000000
0008888000000000000008000111c000000000000100001001000010010000100108001000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08998000008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
89999800089980000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00800000000800000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00880000008880000008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08888000008880000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88989880889898808898988000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
89199180891991808919918000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
89199180891991808919918000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88999980889999808899998000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888800008888000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
333333333333333333333333777777777777777777777777aaaaaaaa000000000000000000000000000000000000000000000000000000000000000000000000
5535353535353535353535357c7c7c7c7c7c7c7c7c7c7c774999999a000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555555555555557cccccccccccccccccccccc749a4449a000000000000000000000000000000000000000000000000000000000000000000000000
5555555555455555555555457cccccccccccccccccccccc749a9949a000000000000000000000000000000000000000000000000000000000000000000000000
5554555555555555555555557cccccccccccccccccccccc749a9949a000000000000000000000000000000000000000000000000000000000000000000000000
5555554555555554555555557cccccccccccccccccccccc749aaaa9a000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555555555455557cccccccccccccccccccccc74999999a000000000000000000000000000000000000000000000000000000000000000000000000
5554555555554555555555557cccccccccccccccccccccc74444444a000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555555555555557cccccc7cccccccccccccc7700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555545555555555555555557ccccc77cccccccccccccc7700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555555555555557cccc777ccccccccccccc77700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555545555555557ccc7777cccccccccccc777700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555555554555555555555557cc7777cccccccccccc7777700000000000000000000000000000000000000000000000000000000000000000000000000000000
5455555555555555555554557c7777cccccccccccc7777c700000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555577777cccccccccccc7777cc700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555555555455555555555557777cccccccccccc7777ccc700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555555555555557cccccccccccccccccccccc700000000000000000000000000000000000000000000000000000000000000000000000000000000
5545555555555455555554557cccccccccccccccccccccc700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555555555555557cccccccccccccccccccccc700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555555555555555555545557cccccccccccccccccccccc700000000000000000000000000000000000000000000000000000000000000000000000000000000
55545555555555555515555571cccccccc1111cccccccc1700000000000000000000000000000000000000000000000000000000000000000000000000000000
5555515555555555555555557c1cc11cc1cccc1cc11cc1c700000000000000000000000000000000000000000000000000000000000000000000000000000000
1551155115555551155115517cc11cc11cccccc11cc11cc700000000000000000000000000000000000000000000000000000000000000000000000000000000
411441144111111441144114c77cc77cc777777cc77cc77c00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000898900000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008899999000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000889999a9900000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000889999999990000080000000044000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008891a991a990000088800000444400
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000889119911990000888880000444400
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888999999990008898988044444444
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088899999900008919918000c1c100
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888888899990008919918000c1c100
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008908999999909008899998002222220
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900889999a909a009888800c0c2220c
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090088899999099090999990c0c2220c
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888889900008098890800cc2c00
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008900000890000008008000c0000c0
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088900000089900008008000c0000c0
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010100000000000000000000000000010101000000000000000000000000000101010000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000404040404040404040404040404040404040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000400000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000040400000000000004000000000000000000040400000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000000000000000000000404000000000000000000040400000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000400000010000004040404000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000404000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000404040404040404040404040404040404040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
